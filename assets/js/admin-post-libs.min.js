!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).flatpickr=t()}(this,function(){"use strict";var te=function(){return(te=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ne=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ie={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},oe={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(3<t&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},re=function(e){return("0"+e).slice(-2)},ae=function(e){return!0===e?1:0};function se(n,i,o){var r;return void 0===o&&(o=!1),function(){var e=this,t=arguments;null!==r&&clearTimeout(r),r=window.setTimeout(function(){r=null,o||n.apply(e,t)},i),o&&!r&&n.apply(e,t)}}var le=function(e){return e instanceof Array?e:[e]};function ce(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function de(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function ue(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function pe(e,t){var n=de("div","numInputWrapper"),i=de("input","numInput "+e),o=de("span","arrowUp"),r=de("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(var a in t)i.setAttribute(a,t[a]);return n.appendChild(i),n.appendChild(o),n.appendChild(r),n}var e=function(){},fe=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},C={D:e,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*ae(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,n){var i=parseInt(t),o=new Date(e.getFullYear(),0,2+7*(i-1),0,0,0,0);return o.setDate(o.getDate()-o.getDay()+n.firstDayOfWeek),o},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:e,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:e,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},ge={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},s={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[s.w(e,t,n)]},F:function(e,t,n){return fe(s.n(e,t,n)-1,!1,t)},G:function(e,t,n){return re(s.h(e,t,n))},H:function(e){return re(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[ae(11<e.getHours())]},M:function(e,t){return fe(e.getMonth(),!0,t)},S:function(e){return re(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return re(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return re(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return re(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},he=function(e){var t=e.config,r=void 0===t?ie:t,n=e.l10n,a=void 0===n?oe:n;return function(i,e,t){var o=t||a;return void 0!==r.formatDate?r.formatDate(i,e,o):e.split("").map(function(e,t,n){return s[e]&&"\\"!==n[t-1]?s[e](i,o,r):"\\"!==e?e:""}).join("")}},me=function(e){var t=e.config,y=void 0===t?ie:t,n=e.l10n,w=void 0===n?oe:n;return function(e,t,n,i){if(0===e||e){var o,r=i||w,a=e;if(e instanceof Date)o=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)o=new Date(e);else if("string"==typeof e){var s=t||(y||ie).dateFormat,l=String(e).trim();if("today"===l)o=new Date,n=!0;else if(/Z$/.test(l)||/GMT$/.test(l))o=new Date(e);else if(y&&y.parseDate)o=y.parseDate(e,s);else{o=y&&y.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var c=void 0,d=[],u=0,p=0,f="";u<s.length;u++){var g=s[u],h="\\"===g,m="\\"===s[u-1]||h;if(ge[g]&&!m){f+=ge[g];var v=new RegExp(f).exec(e);v&&(c=!0)&&d["Y"!==g?"push":"unshift"]({fn:C[g],val:v[++p]})}else h||(f+=".");d.forEach(function(e){var t=e.fn,n=e.val;return o=t(o,n,r)||o})}o=c?o:void 0}}if(o instanceof Date&&!isNaN(o.getTime()))return!0===n&&o.setHours(0,0,0,0),o;y.errorHandler(new Error("Invalid date provided: "+a))}}};function ve(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var ye=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},we={DAY:864e5};"function"!=typeof Object.assign&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(t){t&&Object.keys(t).forEach(function(e){return n[e]=t[e]})},o=0,r=e;o<r.length;o++){i(r[o])}return n});var Ce=300;function a(d,u){var C={config:te({},ie,be.defaultConfig),l10n:oe};function p(e){return e.bind(C)}function t(){var t=C.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==C.calendarContainer&&(C.calendarContainer.style.visibility="hidden",C.calendarContainer.style.display="block"),void 0!==C.daysContainer){var e=(C.days.offsetWidth+1)*t.showMonths;C.daysContainer.style.width=e+"px",C.calendarContainer.style.width=e+(void 0!==C.weekWrapper?C.weekWrapper.offsetWidth:0)+"px",C.calendarContainer.style.removeProperty("visibility"),C.calendarContainer.style.removeProperty("display")}})}function f(e){0===C.selectedDates.length&&H(),void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==C.amPM&&e.target===C.amPM&&(C.amPM.textContent=C.l10n.amPM[ae(C.amPM.textContent===C.l10n.amPM[0])]);var i=parseFloat(n.getAttribute("min")),o=parseFloat(n.getAttribute("max")),r=parseFloat(n.getAttribute("step")),a=parseInt(n.value,10),s=e.delta||(t?38===e.which?1:-1:0),l=a+r*s;if(void 0!==n.value&&2===n.value.length){var c=n===C.hourElement,d=n===C.minuteElement;l<i?(l=o+l+ae(!c)+(ae(c)&&ae(!C.amPM)),d&&m(void 0,-1,C.hourElement)):o<l&&(l=n===C.hourElement?l-o-ae(!C.amPM):i,d&&m(void 0,1,C.hourElement)),C.amPM&&c&&(1===r?l+a===23:Math.abs(l-a)>r)&&(C.amPM.textContent=C.l10n.amPM[ae(C.amPM.textContent===C.l10n.amPM[0])]),n.value=re(l)}}(e);var t=C._input.value;g(),X(),C._input.value!==t&&C._debouncedChange()}function g(){if(void 0!==C.hourElement&&void 0!==C.minuteElement){var e,t,n=(parseInt(C.hourElement.value.slice(-2),10)||0)%24,i=(parseInt(C.minuteElement.value,10)||0)%60,o=void 0!==C.secondElement?(parseInt(C.secondElement.value,10)||0)%60:0;void 0!==C.amPM&&(e=n,t=C.amPM.textContent,n=e%12+12*ae(t===C.l10n.amPM[1]));var r=void 0!==C.config.minTime||C.config.minDate&&C.minDateHasTime&&C.latestSelectedDateObj&&0===ve(C.latestSelectedDateObj,C.config.minDate,!0);if(void 0!==C.config.maxTime||C.config.maxDate&&C.maxDateHasTime&&C.latestSelectedDateObj&&0===ve(C.latestSelectedDateObj,C.config.maxDate,!0)){var a=void 0!==C.config.maxTime?C.config.maxTime:C.config.maxDate;(n=Math.min(n,a.getHours()))===a.getHours()&&(i=Math.min(i,a.getMinutes())),i===a.getMinutes()&&(o=Math.min(o,a.getSeconds()))}if(r){var s=void 0!==C.config.minTime?C.config.minTime:C.config.minDate;(n=Math.max(n,s.getHours()))===s.getHours()&&(i=Math.max(i,s.getMinutes())),i===s.getMinutes()&&(o=Math.max(o,s.getSeconds()))}l(n,i,o)}}function o(e){var t=e||C.latestSelectedDateObj;t&&l(t.getHours(),t.getMinutes(),t.getSeconds())}function n(){var e=C.config.defaultHour,t=C.config.defaultMinute,n=C.config.defaultSeconds;if(void 0!==C.config.minDate){var i=C.config.minDate.getHours(),o=C.config.minDate.getMinutes();(e=Math.max(e,i))===i&&(t=Math.max(o,t)),e===i&&t===o&&(n=C.config.minDate.getSeconds())}if(void 0!==C.config.maxDate){var r=C.config.maxDate.getHours(),a=C.config.maxDate.getMinutes();(e=Math.min(e,r))===r&&(t=Math.min(a,t)),e===r&&t===a&&(n=C.config.maxDate.getSeconds())}l(e,t,n)}function l(e,t,n){void 0!==C.latestSelectedDateObj&&C.latestSelectedDateObj.setHours(e%24,t,n||0,0),C.hourElement&&C.minuteElement&&!C.isMobile&&(C.hourElement.value=re(C.config.time_24hr?e:(12+e)%12+12*ae(e%12==0)),C.minuteElement.value=re(t),void 0!==C.amPM&&(C.amPM.textContent=C.l10n.amPM[ae(12<=e)]),void 0!==C.secondElement&&(C.secondElement.value=re(n)))}function i(e){var t=parseInt(e.target.value)+(e.delta||0);(1<t/1e3||"Enter"===e.key&&!/[^\d]/.test(t.toString()))&&E(t)}function a(t,n,i,o){return n instanceof Array?n.forEach(function(e){return a(t,e,i,o)}):t instanceof Array?t.forEach(function(e){return a(e,n,i,o)}):(t.addEventListener(n,i,o),void C._handlers.push({element:t,event:n,handler:i,options:o}))}function r(t){return function(e){1===e.which&&t(e)}}function c(){J("onChange")}function s(e,t){var n=void 0!==e?C.parseDate(e):C.latestSelectedDateObj||(C.config.minDate&&C.config.minDate>C.now?C.config.minDate:C.config.maxDate&&C.config.maxDate<C.now?C.config.maxDate:C.now),i=C.currentYear,o=C.currentMonth;try{void 0!==n&&(C.currentYear=n.getFullYear(),C.currentMonth=n.getMonth())}catch(e){e.message="Invalid date supplied: "+n,C.config.errorHandler(e)}t&&C.currentYear!==i&&(J("onYearChange"),M()),!t||C.currentYear===i&&C.currentMonth===o||J("onMonthChange"),C.redraw()}function h(e){~e.target.className.indexOf("arrow")&&m(e,e.target.classList.contains("arrowUp")?1:-1)}function m(e,t,n){var i=e&&e.target,o=n||i&&i.parentNode&&i.parentNode.firstChild,r=U("increment");r.delta=t,o&&o.dispatchEvent(r)}function v(e,t,n,i){var o,r=F(t,!0),a=de("span","flatpickr-day "+e,t.getDate().toString());return a.dateObj=t,a.$i=i,a.setAttribute("aria-label",C.formatDate(t,C.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===ve(t,C.now)&&((C.todayDateElem=a).classList.add("today"),a.setAttribute("aria-current","date")),r?(a.tabIndex=-1,Q(t)&&(a.classList.add("selected"),C.selectedDateElem=a,"range"===C.config.mode&&(ce(a,"startRange",C.selectedDates[0]&&0===ve(t,C.selectedDates[0],!0)),ce(a,"endRange",C.selectedDates[1]&&0===ve(t,C.selectedDates[1],!0)),"nextMonthDay"===e&&a.classList.add("inRange")))):a.classList.add("flatpickr-disabled"),"range"===C.config.mode&&(o=t,!("range"!==C.config.mode||C.selectedDates.length<2)&&0<=ve(o,C.selectedDates[0])&&ve(o,C.selectedDates[1])<=0&&!Q(t)&&a.classList.add("inRange")),C.weekNumbers&&1===C.config.showMonths&&"prevMonthDay"!==e&&n%7==1&&C.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+C.config.getWeek(t)+"</span>"),J("onDayCreate",a),a}function y(e){e.focus(),"range"===C.config.mode&&N(e)}function w(e){for(var t=0<e?0:C.config.showMonths-1,n=0<e?C.config.showMonths:-1,i=t;i!=n;i+=e)for(var o=C.daysContainer.children[i],r=0<e?0:o.children.length-1,a=0<e?o.children.length:-1,s=r;s!=a;s+=e){var l=o.children[s];if(-1===l.className.indexOf("hidden")&&F(l.dateObj))return l}}function b(e,t){var n=P(document.activeElement||document.body),i=void 0!==e?e:n?document.activeElement:void 0!==C.selectedDateElem&&P(C.selectedDateElem)?C.selectedDateElem:void 0!==C.todayDateElem&&P(C.todayDateElem)?C.todayDateElem:w(0<t?1:-1);return void 0===i?C._input.focus():n?void function(e,t){for(var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():C.currentMonth,i=0<t?C.config.showMonths:-1,o=0<t?1:-1,r=n-C.currentMonth;r!=i;r+=o)for(var a=C.daysContainer.children[r],s=n-C.currentMonth===r?e.$i+t:t<0?a.children.length-1:0,l=a.children.length,c=s;0<=c&&c<l&&c!=(0<t?l:-1);c+=o){var d=a.children[c];if(-1===d.className.indexOf("hidden")&&F(d.dateObj)&&Math.abs(e.$i-c)>=Math.abs(t))return y(d)}C.changeMonth(o),b(w(o),0)}(i,t):y(i)}function D(e,t){for(var n=(new Date(e,t,1).getDay()-C.l10n.firstDayOfWeek+7)%7,i=C.utils.getDaysInMonth((t-1+12)%12),o=C.utils.getDaysInMonth(t),r=window.document.createDocumentFragment(),a=1<C.config.showMonths,s=a?"prevMonthDay hidden":"prevMonthDay",l=a?"nextMonthDay hidden":"nextMonthDay",c=i+1-n,d=0;c<=i;c++,d++)r.appendChild(v(s,new Date(e,t-1,c),c,d));for(c=1;c<=o;c++,d++)r.appendChild(v("",new Date(e,t,c),c,d));for(var u=o+1;u<=42-n&&(1===C.config.showMonths||d%7!=0);u++,d++)r.appendChild(v(l,new Date(e,t+1,u%o),u,d));var p=de("div","dayContainer");return p.appendChild(r),p}function O(){if(void 0!==C.daysContainer){ue(C.daysContainer),C.weekNumbers&&ue(C.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<C.config.showMonths;t++){var n=new Date(C.currentYear,C.currentMonth,1);n.setMonth(C.currentMonth+t),e.appendChild(D(n.getFullYear(),n.getMonth()))}C.daysContainer.appendChild(e),C.days=C.daysContainer.firstChild,"range"===C.config.mode&&1===C.selectedDates.length&&N()}}function M(){if(!(1<C.config.showMonths||"dropdown"!==C.config.monthSelectorType)){var e;C.monthsDropdownContainer.tabIndex=-1,C.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e=t,!(void 0!==C.config.minDate&&C.currentYear===C.config.minDate.getFullYear()&&e<C.config.minDate.getMonth()||void 0!==C.config.maxDate&&C.currentYear===C.config.maxDate.getFullYear()&&e>C.config.maxDate.getMonth())){var n=de("option","flatpickr-monthDropdown-month");n.value=new Date(C.currentYear,t).getMonth().toString(),n.textContent=fe(t,C.config.shorthandCurrentMonth,C.l10n),n.tabIndex=-1,C.currentMonth===t&&(n.selected=!0),C.monthsDropdownContainer.appendChild(n)}}}function x(){var e,t=de("div","flatpickr-month"),n=window.document.createDocumentFragment();e=1<C.config.showMonths||"static"===C.config.monthSelectorType?de("span","cur-month"):(C.monthsDropdownContainer=de("select","flatpickr-monthDropdown-months"),a(C.monthsDropdownContainer,"change",function(e){var t=e.target,n=parseInt(t.value,10);C.changeMonth(n-C.currentMonth),J("onMonthChange")}),M(),C.monthsDropdownContainer);var i=pe("cur-year",{tabindex:"-1"}),o=i.getElementsByTagName("input")[0];o.setAttribute("aria-label",C.l10n.yearAriaLabel),C.config.minDate&&o.setAttribute("min",C.config.minDate.getFullYear().toString()),C.config.maxDate&&(o.setAttribute("max",C.config.maxDate.getFullYear().toString()),o.disabled=!!C.config.minDate&&C.config.minDate.getFullYear()===C.config.maxDate.getFullYear());var r=de("div","flatpickr-current-month");return r.appendChild(e),r.appendChild(i),n.appendChild(r),t.appendChild(n),{container:t,yearElement:o,monthElement:e}}function I(){ue(C.monthNav),C.monthNav.appendChild(C.prevMonthNav),C.config.showMonths&&(C.yearElements=[],C.monthElements=[]);for(var e=C.config.showMonths;e--;){var t=x();C.yearElements.push(t.yearElement),C.monthElements.push(t.monthElement),C.monthNav.appendChild(t.container)}C.monthNav.appendChild(C.nextMonthNav)}function S(){C.weekdayContainer?ue(C.weekdayContainer):C.weekdayContainer=de("div","flatpickr-weekdays");for(var e=C.config.showMonths;e--;){var t=de("div","flatpickr-weekdaycontainer");C.weekdayContainer.appendChild(t)}return k(),C.weekdayContainer}function k(){var e=C.l10n.firstDayOfWeek,t=C.l10n.weekdays.shorthand.slice();0<e&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=C.config.showMonths;n--;)C.weekdayContainer.children[n].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}function _(e,t){void 0===t&&(t=!0);var n=t?e:e-C.currentMonth;n<0&&!0===C._hidePrevMonthArrow||0<n&&!0===C._hideNextMonthArrow||(C.currentMonth+=n,(C.currentMonth<0||11<C.currentMonth)&&(C.currentYear+=11<C.currentMonth?1:-1,C.currentMonth=(C.currentMonth+12)%12,J("onYearChange"),M()),O(),J("onMonthChange"),G())}function T(e){return!(!C.config.appendTo||!C.config.appendTo.contains(e))||C.calendarContainer.contains(e)}function $(e){if(C.isOpen&&!C.config.inline){var t="function"!=typeof(a=e).composedPath?a.target:a.composedPath()[0],n=T(t),i=t===C.input||t===C.altInput||C.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(C.input)||~e.path.indexOf(C.altInput)),o="blur"===e.type?i&&e.relatedTarget&&!T(e.relatedTarget):!i&&!n&&!T(e.relatedTarget),r=!C.config.ignoredFocusElements.some(function(e){return e.contains(t)});o&&r&&(C.close(),"range"===C.config.mode&&1===C.selectedDates.length&&(C.clear(!1),C.redraw()))}var a}function E(e){if(!(!e||C.config.minDate&&e<C.config.minDate.getFullYear()||C.config.maxDate&&e>C.config.maxDate.getFullYear())){var t=e,n=C.currentYear!==t;C.currentYear=t||C.currentYear,C.config.maxDate&&C.currentYear===C.config.maxDate.getFullYear()?C.currentMonth=Math.min(C.config.maxDate.getMonth(),C.currentMonth):C.config.minDate&&C.currentYear===C.config.minDate.getFullYear()&&(C.currentMonth=Math.max(C.config.minDate.getMonth(),C.currentMonth)),n&&(C.redraw(),J("onYearChange"),M())}}function F(e,t){void 0===t&&(t=!0);var n=C.parseDate(e,void 0,t);if(C.config.minDate&&n&&ve(n,C.config.minDate,void 0!==t?t:!C.minDateHasTime)<0||C.config.maxDate&&n&&0<ve(n,C.config.maxDate,void 0!==t?t:!C.maxDateHasTime))return!1;if(0===C.config.enable.length&&0===C.config.disable.length)return!0;if(void 0===n)return!1;for(var i=0<C.config.enable.length,o=i?C.config.enable:C.config.disable,r=0,a=void 0;r<o.length;r++){if("function"==typeof(a=o[r])&&a(n))return i;if(a instanceof Date&&void 0!==n&&a.getTime()===n.getTime())return i;if("string"==typeof a&&void 0!==n){var s=C.parseDate(a,void 0,!0);return s&&s.getTime()===n.getTime()?i:!i}if("object"==typeof a&&void 0!==n&&a.from&&a.to&&n.getTime()>=a.from.getTime()&&n.getTime()<=a.to.getTime())return i}return!i}function P(e){return void 0!==C.daysContainer&&(-1===e.className.indexOf("hidden")&&C.daysContainer.contains(e))}function A(e){var t=e.target===C._input,n=C.config.allowInput,i=C.isOpen&&(!n||!t),o=C.config.inline&&t&&!n;if(13===e.keyCode&&t){if(n)return C.setDate(C._input.value,!0,e.target===C.altInput?C.config.altFormat:C.config.dateFormat),e.target.blur();C.open()}else if(T(e.target)||i||o){var r=!!C.timeContainer&&C.timeContainer.contains(e.target);switch(e.keyCode){case 13:r?(e.preventDefault(),f(),R()):K(e);break;case 27:e.preventDefault(),R();break;case 8:case 46:t&&!C.config.allowInput&&(e.preventDefault(),C.clear());break;case 37:case 39:if(r||t)C.hourElement&&C.hourElement.focus();else if(e.preventDefault(),void 0!==C.daysContainer&&(!1===n||document.activeElement&&P(document.activeElement))){var a=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),_(a),b(w(1),0)):b(void 0,a)}break;case 38:case 40:e.preventDefault();var s=40===e.keyCode?1:-1;C.daysContainer&&void 0!==e.target.$i||e.target===C.input?e.ctrlKey?(e.stopPropagation(),E(C.currentYear-s),b(w(1),0)):r||b(void 0,7*s):e.target===C.currentYearElement?E(C.currentYear-s):C.config.enableTime&&(!r&&C.hourElement&&C.hourElement.focus(),f(e),C._debouncedChange());break;case 9:if(r){var l=[C.hourElement,C.minuteElement,C.secondElement,C.amPM].concat(C.pluginElements).filter(function(e){return e}),c=l.indexOf(e.target);if(-1!==c){var d=l[c+(e.shiftKey?-1:1)];e.preventDefault(),(d||C._input).focus()}}else!C.config.noCalendar&&C.daysContainer&&C.daysContainer.contains(e.target)&&e.shiftKey&&(e.preventDefault(),C._input.focus())}}if(void 0!==C.amPM&&e.target===C.amPM)switch(e.key){case C.l10n.amPM[0].charAt(0):case C.l10n.amPM[0].charAt(0).toLowerCase():C.amPM.textContent=C.l10n.amPM[0],g(),X();break;case C.l10n.amPM[1].charAt(0):case C.l10n.amPM[1].charAt(0).toLowerCase():C.amPM.textContent=C.l10n.amPM[1],g(),X()}(t||T(e.target))&&J("onKeyDown",e)}function N(r){if(1===C.selectedDates.length&&(!r||r.classList.contains("flatpickr-day")&&!r.classList.contains("flatpickr-disabled"))){for(var a=r?r.dateObj.getTime():C.days.firstElementChild.dateObj.getTime(),s=C.parseDate(C.selectedDates[0],void 0,!0).getTime(),e=Math.min(a,C.selectedDates[0].getTime()),t=Math.max(a,C.selectedDates[0].getTime()),l=!1,c=0,d=0,n=e;n<t;n+=we.DAY)F(new Date(n),!0)||(l=l||e<n&&n<t,n<s&&(!c||c<n)?c=n:s<n&&(!d||n<d)&&(d=n));for(var i=0;i<C.config.showMonths;i++)for(var u=C.daysContainer.children[i],o=function(e,t){var n=u.children[e],i=n.dateObj.getTime(),o=0<c&&i<c||0<d&&d<i;return o?(n.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){n.classList.remove(e)}),"continue"):l&&!o?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){n.classList.remove(e)}),void(void 0!==r&&(r.classList.add(a<=C.selectedDates[0].getTime()?"startRange":"endRange"),s<a&&i===s?n.classList.add("startRange"):a<s&&i===s&&n.classList.add("endRange"),c<=i&&(0===d||i<=d)&&ye(i,s,a)&&n.classList.add("inRange"))))},p=0,f=u.children.length;p<f;p++)o(p)}}function j(){!C.isOpen||C.config.static||C.config.inline||z()}function H(){C.setDate(void 0!==C.config.minDate?new Date(C.config.minDate.getTime()):new Date,!0),n(),X()}function Y(i){return function(e){var t=C.config["_"+i+"Date"]=C.parseDate(e,C.config.dateFormat),n=C.config["_"+("min"===i?"max":"min")+"Date"];void 0!==t&&(C["min"===i?"minDateHasTime":"maxDateHasTime"]=0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()),C.selectedDates&&(C.selectedDates=C.selectedDates.filter(function(e){return F(e)}),C.selectedDates.length||"min"!==i||o(t),X()),C.daysContainer&&(q(),void 0!==t?C.currentYearElement[i]=t.getFullYear().toString():C.currentYearElement.removeAttribute(i),C.currentYearElement.disabled=!!n&&void 0!==t&&n.getFullYear()===t.getFullYear())}}function L(){"object"!=typeof C.config.locale&&void 0===be.l10ns[C.config.locale]&&C.config.errorHandler(new Error("flatpickr: invalid locale "+C.config.locale)),C.l10n=te({},be.l10ns.default,"object"==typeof C.config.locale?C.config.locale:"default"!==C.config.locale?be.l10ns[C.config.locale]:void 0),ge.K="("+C.l10n.amPM[0]+"|"+C.l10n.amPM[1]+"|"+C.l10n.amPM[0].toLowerCase()+"|"+C.l10n.amPM[1].toLowerCase()+")",void 0===te({},u,JSON.parse(JSON.stringify(d.dataset||{}))).time_24hr&&void 0===be.defaultConfig.time_24hr&&(C.config.time_24hr=C.l10n.time_24hr),C.formatDate=he(C),C.parseDate=me({config:C.config,l10n:C.l10n})}function z(e){if(void 0!==C.calendarContainer){J("onPreCalendarPosition");var t=e||C._positionElement,n=Array.prototype.reduce.call(C.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=C.calendarContainer.offsetWidth,o=C.config.position.split(" "),r=o[0],a=1<o.length?o[1]:null,s=t.getBoundingClientRect(),l=window.innerHeight-s.bottom,c="above"===r||"below"!==r&&l<n&&s.top>n,d=window.pageYOffset+s.top+(c?-n-2:t.offsetHeight+2);if(ce(C.calendarContainer,"arrowTop",!c),ce(C.calendarContainer,"arrowBottom",c),!C.config.inline){var u=window.pageXOffset+s.left-(null!=a&&"center"===a?(i-s.width)/2:0),p=window.document.body.offsetWidth-s.right,f=u+i>window.document.body.offsetWidth,g=p+i>window.document.body.offsetWidth;if(ce(C.calendarContainer,"rightMost",f),!C.config.static)if(C.calendarContainer.style.top=d+"px",f)if(g){var h=document.styleSheets[0];if(void 0===h)return;var m=window.document.body.offsetWidth,v=Math.max(0,m/2-i/2),y=h.cssRules.length,w="{left:"+s.left+"px;right:auto;}";ce(C.calendarContainer,"rightMost",!1),ce(C.calendarContainer,"centerMost",!0),h.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+w,y),C.calendarContainer.style.left=v+"px",C.calendarContainer.style.right="auto"}else C.calendarContainer.style.left="auto",C.calendarContainer.style.right=p+"px";else C.calendarContainer.style.left=u+"px",C.calendarContainer.style.right="auto"}}}function q(){C.config.noCalendar||C.isMobile||(G(),O())}function R(){C._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(C.close,0):C.close()}function K(e){e.preventDefault(),e.stopPropagation();var t=function e(t,n){return n(t)?t:t.parentNode?e(t.parentNode,n):void 0}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")});if(void 0!==t){var n=t,i=C.latestSelectedDateObj=new Date(n.dateObj.getTime()),o=(i.getMonth()<C.currentMonth||i.getMonth()>C.currentMonth+C.config.showMonths-1)&&"range"!==C.config.mode;if(C.selectedDateElem=n,"single"===C.config.mode)C.selectedDates=[i];else if("multiple"===C.config.mode){var r=Q(i);r?C.selectedDates.splice(parseInt(r),1):C.selectedDates.push(i)}else"range"===C.config.mode&&(2===C.selectedDates.length&&C.clear(!1,!1),C.latestSelectedDateObj=i,C.selectedDates.push(i),0!==ve(i,C.selectedDates[0],!0)&&C.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(g(),o){var a=C.currentYear!==i.getFullYear();C.currentYear=i.getFullYear(),C.currentMonth=i.getMonth(),a&&(J("onYearChange"),M()),J("onMonthChange")}if(G(),O(),X(),C.config.enableTime&&setTimeout(function(){return C.showTimeInput=!0},50),o||"range"===C.config.mode||1!==C.config.showMonths?void 0!==C.selectedDateElem&&void 0===C.hourElement&&C.selectedDateElem&&C.selectedDateElem.focus():y(n),void 0!==C.hourElement&&void 0!==C.hourElement&&C.hourElement.focus(),C.config.closeOnSelect){var s="single"===C.config.mode&&!C.config.enableTime,l="range"===C.config.mode&&2===C.selectedDates.length&&!C.config.enableTime;(s||l)&&R()}c()}}C.parseDate=me({config:C.config,l10n:C.l10n}),C._handlers=[],C.pluginElements=[],C.loadedPlugins=[],C._bind=a,C._setHoursFromDate=o,C._positionCalendar=z,C.changeMonth=_,C.changeYear=E,C.clear=function(e,t){void 0===e&&(e=!0);void 0===t&&(t=!0);C.input.value="",void 0!==C.altInput&&(C.altInput.value="");void 0!==C.mobileInput&&(C.mobileInput.value="");C.selectedDates=[],!(C.latestSelectedDateObj=void 0)===t&&(C.currentYear=C._initialDate.getFullYear(),C.currentMonth=C._initialDate.getMonth());!(C.showTimeInput=!1)===C.config.enableTime&&n();C.redraw(),e&&J("onChange")},C.close=function(){C.isOpen=!1,C.isMobile||(void 0!==C.calendarContainer&&C.calendarContainer.classList.remove("open"),void 0!==C._input&&C._input.classList.remove("active"));J("onClose")},C._createElement=de,C.destroy=function(){void 0!==C.config&&J("onDestroy");for(var e=C._handlers.length;e--;){var t=C._handlers[e];t.element.removeEventListener(t.event,t.handler,t.options)}if(C._handlers=[],C.mobileInput)C.mobileInput.parentNode&&C.mobileInput.parentNode.removeChild(C.mobileInput),C.mobileInput=void 0;else if(C.calendarContainer&&C.calendarContainer.parentNode)if(C.config.static&&C.calendarContainer.parentNode){var n=C.calendarContainer.parentNode;if(n.lastChild&&n.removeChild(n.lastChild),n.parentNode){for(;n.firstChild;)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}}else C.calendarContainer.parentNode.removeChild(C.calendarContainer);C.altInput&&(C.input.type="text",C.altInput.parentNode&&C.altInput.parentNode.removeChild(C.altInput),delete C.altInput);C.input&&(C.input.type=C.input._type,C.input.classList.remove("flatpickr-input"),C.input.removeAttribute("readonly"),C.input.value="");["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete C[e]}catch(e){}})},C.isEnabled=F,C.jumpToDate=s,C.open=function(e,t){void 0===t&&(t=C._positionElement);if(!0===C.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),void 0!==C.mobileInput&&(C.mobileInput.focus(),C.mobileInput.click()),void J("onOpen");if(C._input.disabled||C.config.inline)return;var n=C.isOpen;C.isOpen=!0,n||(C.calendarContainer.classList.add("open"),C._input.classList.add("active"),J("onOpen"),z(t));!0===C.config.enableTime&&!0===C.config.noCalendar&&(0===C.selectedDates.length&&H(),!1!==C.config.allowInput||void 0!==e&&C.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return C.hourElement.select()},50))},C.redraw=q,C.set=function(e,t){if(null!==e&&"object"==typeof e)for(var n in Object.assign(C.config,e),e)void 0!==W[n]&&W[n].forEach(function(e){return e()});else C.config[e]=t,void 0!==W[e]?W[e].forEach(function(e){return e()}):-1<ne.indexOf(e)&&(C.config[e]=le(t));C.redraw(),X(!1)},C.setDate=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=C.config.dateFormat);if(0!==e&&!e||e instanceof Array&&0===e.length)return C.clear(t);B(e,n),C.showTimeInput=0<C.selectedDates.length,C.latestSelectedDateObj=C.selectedDates[C.selectedDates.length-1],C.redraw(),s(),o(),0===C.selectedDates.length&&C.clear(!1);X(t),t&&J("onChange")},C.toggle=function(e){if(!0===C.isOpen)return C.close();C.open(e)};var W={locale:[L,k],showMonths:[I,t,S],minDate:[s],maxDate:[s]};function B(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return C.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[C.parseDate(e,t)];else if("string"==typeof e)switch(C.config.mode){case"single":case"time":n=[C.parseDate(e,t)];break;case"multiple":n=e.split(C.config.conjunction).map(function(e){return C.parseDate(e,t)});break;case"range":n=e.split(C.l10n.rangeSeparator).map(function(e){return C.parseDate(e,t)})}else C.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));C.selectedDates=n.filter(function(e){return e instanceof Date&&F(e,!1)}),"range"===C.config.mode&&C.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function V(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?C.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:C.parseDate(e.from,void 0),to:C.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function J(e,t){if(void 0!==C.config){var n=C.config[e];if(void 0!==n&&0<n.length)for(var i=0;n[i]&&i<n.length;i++)n[i](C.selectedDates,C.input.value,C,t);"onChange"===e&&(C.input.dispatchEvent(U("change")),C.input.dispatchEvent(U("input")))}}function U(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function Q(e){for(var t=0;t<C.selectedDates.length;t++)if(0===ve(C.selectedDates[t],e))return""+t;return!1}function G(){C.config.noCalendar||C.isMobile||!C.monthNav||(C.yearElements.forEach(function(e,t){var n=new Date(C.currentYear,C.currentMonth,1);n.setMonth(C.currentMonth+t),1<C.config.showMonths||"static"===C.config.monthSelectorType?C.monthElements[t].textContent=fe(n.getMonth(),C.config.shorthandCurrentMonth,C.l10n)+" ":C.monthsDropdownContainer.value=n.getMonth().toString(),e.value=n.getFullYear().toString()}),C._hidePrevMonthArrow=void 0!==C.config.minDate&&(C.currentYear===C.config.minDate.getFullYear()?C.currentMonth<=C.config.minDate.getMonth():C.currentYear<C.config.minDate.getFullYear()),C._hideNextMonthArrow=void 0!==C.config.maxDate&&(C.currentYear===C.config.maxDate.getFullYear()?C.currentMonth+1>C.config.maxDate.getMonth():C.currentYear>C.config.maxDate.getFullYear()))}function Z(t){return C.selectedDates.map(function(e){return C.formatDate(e,t)}).filter(function(e,t,n){return"range"!==C.config.mode||C.config.enableTime||n.indexOf(e)===t}).join("range"!==C.config.mode?C.config.conjunction:C.l10n.rangeSeparator)}function X(e){void 0===e&&(e=!0),void 0!==C.mobileInput&&C.mobileFormatStr&&(C.mobileInput.value=void 0!==C.latestSelectedDateObj?C.formatDate(C.latestSelectedDateObj,C.mobileFormatStr):""),C.input.value=Z(C.config.dateFormat),void 0!==C.altInput&&(C.altInput.value=Z(C.config.altFormat)),!1!==e&&J("onValueUpdate")}function ee(e){var t=C.prevMonthNav.contains(e.target),n=C.nextMonthNav.contains(e.target);t||n?_(t?-1:1):0<=C.yearElements.indexOf(e.target)?e.target.select():e.target.classList.contains("arrowUp")?C.changeYear(C.currentYear+1):e.target.classList.contains("arrowDown")&&C.changeYear(C.currentYear-1)}return function(){C.element=C.input=d,C.isOpen=!1,function(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=te({},u,JSON.parse(JSON.stringify(d.dataset||{}))),n={};C.config.parseDate=t.parseDate,C.config.formatDate=t.formatDate,Object.defineProperty(C.config,"enable",{get:function(){return C.config._enable},set:function(e){C.config._enable=V(e)}}),Object.defineProperty(C.config,"disable",{get:function(){return C.config._disable},set:function(e){C.config._disable=V(e)}});var i="time"===t.mode;if(!t.dateFormat&&(t.enableTime||i)){var o=be.defaultConfig.dateFormat||ie.dateFormat;n.dateFormat=t.noCalendar||i?"H:i"+(t.enableSeconds?":S":""):o+" H:i"+(t.enableSeconds?":S":"")}if(t.altInput&&(t.enableTime||i)&&!t.altFormat){var r=be.defaultConfig.altFormat||ie.altFormat;n.altFormat=t.noCalendar||i?"h:i"+(t.enableSeconds?":S K":" K"):r+" h:i"+(t.enableSeconds?":S":"")+" K"}t.altInputClass||(C.config.altInputClass=C.input.className+" "+C.config.altInputClass),Object.defineProperty(C.config,"minDate",{get:function(){return C.config._minDate},set:Y("min")}),Object.defineProperty(C.config,"maxDate",{get:function(){return C.config._maxDate},set:Y("max")});var a=function(t){return function(e){C.config["min"===t?"_minTime":"_maxTime"]=C.parseDate(e,"H:i")}};Object.defineProperty(C.config,"minTime",{get:function(){return C.config._minTime},set:a("min")}),Object.defineProperty(C.config,"maxTime",{get:function(){return C.config._maxTime},set:a("max")}),"time"===t.mode&&(C.config.noCalendar=!0,C.config.enableTime=!0),Object.assign(C.config,n,t);for(var s=0;s<e.length;s++)C.config[e[s]]=!0===C.config[e[s]]||"true"===C.config[e[s]];ne.filter(function(e){return void 0!==C.config[e]}).forEach(function(e){C.config[e]=le(C.config[e]||[]).map(p)}),C.isMobile=!C.config.disableMobile&&!C.config.inline&&"single"===C.config.mode&&!C.config.disable.length&&!C.config.enable.length&&!C.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var s=0;s<C.config.plugins.length;s++){var l=C.config.plugins[s](C)||{};for(var c in l)-1<ne.indexOf(c)?C.config[c]=le(l[c]).map(p).concat(C.config[c]):void 0===t[c]&&(C.config[c]=l[c])}J("onParseConfig")}(),L(),function(){if(C.input=C.config.wrap?d.querySelector("[data-input]"):d,!C.input)return C.config.errorHandler(new Error("Invalid input element specified"));C.input._type=C.input.type,C.input.type="text",C.input.classList.add("flatpickr-input"),C._input=C.input,C.config.altInput&&(C.altInput=de(C.input.nodeName,C.config.altInputClass),C._input=C.altInput,C.altInput.placeholder=C.input.placeholder,C.altInput.disabled=C.input.disabled,C.altInput.required=C.input.required,C.altInput.tabIndex=C.input.tabIndex,C.altInput.type="text",C.input.setAttribute("type","hidden"),!C.config.static&&C.input.parentNode&&C.input.parentNode.insertBefore(C.altInput,C.input.nextSibling)),C.config.allowInput||C._input.setAttribute("readonly","readonly"),C._positionElement=C.config.positionElement||C._input}(),function(){C.selectedDates=[],C.now=C.parseDate(C.config.now)||new Date;var e=C.config.defaultDate||("INPUT"!==C.input.nodeName&&"TEXTAREA"!==C.input.nodeName||!C.input.placeholder||C.input.value!==C.input.placeholder?C.input.value:null);e&&B(e,C.config.dateFormat),C._initialDate=0<C.selectedDates.length?C.selectedDates[0]:C.config.minDate&&C.config.minDate.getTime()>C.now.getTime()?C.config.minDate:C.config.maxDate&&C.config.maxDate.getTime()<C.now.getTime()?C.config.maxDate:C.now,C.currentYear=C._initialDate.getFullYear(),C.currentMonth=C._initialDate.getMonth(),0<C.selectedDates.length&&(C.latestSelectedDateObj=C.selectedDates[0]),void 0!==C.config.minTime&&(C.config.minTime=C.parseDate(C.config.minTime,"H:i")),void 0!==C.config.maxTime&&(C.config.maxTime=C.parseDate(C.config.maxTime,"H:i")),C.minDateHasTime=!!C.config.minDate&&(0<C.config.minDate.getHours()||0<C.config.minDate.getMinutes()||0<C.config.minDate.getSeconds()),C.maxDateHasTime=!!C.config.maxDate&&(0<C.config.maxDate.getHours()||0<C.config.maxDate.getMinutes()||0<C.config.maxDate.getSeconds()),Object.defineProperty(C,"showTimeInput",{get:function(){return C._showTimeInput},set:function(e){C._showTimeInput=e,C.calendarContainer&&ce(C.calendarContainer,"showTimeInput",e),C.isOpen&&z()}})}(),C.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=C.currentMonth),void 0===t&&(t=C.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:C.l10n.daysInMonth[e]}},C.isMobile||function(){var e=window.document.createDocumentFragment();if(C.calendarContainer=de("div","flatpickr-calendar"),C.calendarContainer.tabIndex=-1,!C.config.noCalendar){if(e.appendChild((C.monthNav=de("div","flatpickr-months"),C.yearElements=[],C.monthElements=[],C.prevMonthNav=de("span","flatpickr-prev-month"),C.prevMonthNav.innerHTML=C.config.prevArrow,C.nextMonthNav=de("span","flatpickr-next-month"),C.nextMonthNav.innerHTML=C.config.nextArrow,I(),Object.defineProperty(C,"_hidePrevMonthArrow",{get:function(){return C.__hidePrevMonthArrow},set:function(e){C.__hidePrevMonthArrow!==e&&(ce(C.prevMonthNav,"flatpickr-disabled",e),C.__hidePrevMonthArrow=e)}}),Object.defineProperty(C,"_hideNextMonthArrow",{get:function(){return C.__hideNextMonthArrow},set:function(e){C.__hideNextMonthArrow!==e&&(ce(C.nextMonthNav,"flatpickr-disabled",e),C.__hideNextMonthArrow=e)}}),C.currentYearElement=C.yearElements[0],G(),C.monthNav)),C.innerContainer=de("div","flatpickr-innerContainer"),C.config.weekNumbers){var t=function(){C.calendarContainer.classList.add("hasWeeks");var e=de("div","flatpickr-weekwrapper");e.appendChild(de("span","flatpickr-weekday",C.l10n.weekAbbreviation));var t=de("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),n=t.weekWrapper,i=t.weekNumbers;C.innerContainer.appendChild(n),C.weekNumbers=i,C.weekWrapper=n}C.rContainer=de("div","flatpickr-rContainer"),C.rContainer.appendChild(S()),C.daysContainer||(C.daysContainer=de("div","flatpickr-days"),C.daysContainer.tabIndex=-1),O(),C.rContainer.appendChild(C.daysContainer),C.innerContainer.appendChild(C.rContainer),e.appendChild(C.innerContainer)}C.config.enableTime&&e.appendChild(function(){C.calendarContainer.classList.add("hasTime"),C.config.noCalendar&&C.calendarContainer.classList.add("noCalendar"),C.timeContainer=de("div","flatpickr-time"),C.timeContainer.tabIndex=-1;var e=de("span","flatpickr-time-separator",":"),t=pe("flatpickr-hour",{"aria-label":C.l10n.hourAriaLabel});C.hourElement=t.getElementsByTagName("input")[0];var n=pe("flatpickr-minute",{"aria-label":C.l10n.minuteAriaLabel});if(C.minuteElement=n.getElementsByTagName("input")[0],C.hourElement.tabIndex=C.minuteElement.tabIndex=-1,C.hourElement.value=re(C.latestSelectedDateObj?C.latestSelectedDateObj.getHours():C.config.time_24hr?C.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(C.config.defaultHour)),C.minuteElement.value=re(C.latestSelectedDateObj?C.latestSelectedDateObj.getMinutes():C.config.defaultMinute),C.hourElement.setAttribute("step",C.config.hourIncrement.toString()),C.minuteElement.setAttribute("step",C.config.minuteIncrement.toString()),C.hourElement.setAttribute("min",C.config.time_24hr?"0":"1"),C.hourElement.setAttribute("max",C.config.time_24hr?"23":"12"),C.minuteElement.setAttribute("min","0"),C.minuteElement.setAttribute("max","59"),C.timeContainer.appendChild(t),C.timeContainer.appendChild(e),C.timeContainer.appendChild(n),C.config.time_24hr&&C.timeContainer.classList.add("time24hr"),C.config.enableSeconds){C.timeContainer.classList.add("hasSeconds");var i=pe("flatpickr-second");C.secondElement=i.getElementsByTagName("input")[0],C.secondElement.value=re(C.latestSelectedDateObj?C.latestSelectedDateObj.getSeconds():C.config.defaultSeconds),C.secondElement.setAttribute("step",C.minuteElement.getAttribute("step")),C.secondElement.setAttribute("min","0"),C.secondElement.setAttribute("max","59"),C.timeContainer.appendChild(de("span","flatpickr-time-separator",":")),C.timeContainer.appendChild(i)}return C.config.time_24hr||(C.amPM=de("span","flatpickr-am-pm",C.l10n.amPM[ae(11<(C.latestSelectedDateObj?C.hourElement.value:C.config.defaultHour))]),C.amPM.title=C.l10n.toggleTitle,C.amPM.tabIndex=-1,C.timeContainer.appendChild(C.amPM)),C.timeContainer}()),ce(C.calendarContainer,"rangeMode","range"===C.config.mode),ce(C.calendarContainer,"animate",!0===C.config.animate),ce(C.calendarContainer,"multiMonth",1<C.config.showMonths),C.calendarContainer.appendChild(e);var o=void 0!==C.config.appendTo&&void 0!==C.config.appendTo.nodeType;if((C.config.inline||C.config.static)&&(C.calendarContainer.classList.add(C.config.inline?"inline":"static"),C.config.inline&&(!o&&C.element.parentNode?C.element.parentNode.insertBefore(C.calendarContainer,C._input.nextSibling):void 0!==C.config.appendTo&&C.config.appendTo.appendChild(C.calendarContainer)),C.config.static)){var r=de("div","flatpickr-wrapper");C.element.parentNode&&C.element.parentNode.insertBefore(r,C.element),r.appendChild(C.element),C.altInput&&r.appendChild(C.altInput),r.appendChild(C.calendarContainer)}C.config.static||C.config.inline||(void 0!==C.config.appendTo?C.config.appendTo:window.document.body).appendChild(C.calendarContainer)}(),function(){if(C.config.wrap&&["open","close","toggle","clear"].forEach(function(t){Array.prototype.forEach.call(C.element.querySelectorAll("[data-"+t+"]"),function(e){return a(e,"click",C[t])})}),C.isMobile)return function(){var e=C.config.enableTime?C.config.noCalendar?"time":"datetime-local":"date";C.mobileInput=de("input",C.input.className+" flatpickr-mobile"),C.mobileInput.step=C.input.getAttribute("step")||"any",C.mobileInput.tabIndex=1,C.mobileInput.type=e,C.mobileInput.disabled=C.input.disabled,C.mobileInput.required=C.input.required,C.mobileInput.placeholder=C.input.placeholder,C.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",0<C.selectedDates.length&&(C.mobileInput.defaultValue=C.mobileInput.value=C.formatDate(C.selectedDates[0],C.mobileFormatStr)),C.config.minDate&&(C.mobileInput.min=C.formatDate(C.config.minDate,"Y-m-d")),C.config.maxDate&&(C.mobileInput.max=C.formatDate(C.config.maxDate,"Y-m-d")),C.input.type="hidden",void 0!==C.altInput&&(C.altInput.type="hidden");try{C.input.parentNode&&C.input.parentNode.insertBefore(C.mobileInput,C.input.nextSibling)}catch(e){}a(C.mobileInput,"change",function(e){C.setDate(e.target.value,!1,C.mobileFormatStr),J("onChange"),J("onClose")})}();var e=se(j,50);C._debouncedChange=se(c,Ce),C.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&a(C.daysContainer,"mouseover",function(e){"range"===C.config.mode&&N(e.target)}),a(window.document.body,"keydown",A),C.config.inline||C.config.static||a(window,"resize",e),void 0!==window.ontouchstart?a(window.document,"touchstart",$):a(window.document,"mousedown",r($)),a(window.document,"focus",$,{capture:!0}),!0===C.config.clickOpens&&(a(C._input,"focus",C.open),a(C._input,"mousedown",r(C.open))),void 0!==C.daysContainer&&(a(C.monthNav,"mousedown",r(ee)),a(C.monthNav,["keyup","increment"],i),a(C.daysContainer,"mousedown",r(K))),void 0!==C.timeContainer&&void 0!==C.minuteElement&&void 0!==C.hourElement&&(a(C.timeContainer,["increment"],f),a(C.timeContainer,"blur",f,{capture:!0}),a(C.timeContainer,"mousedown",r(h)),a([C.hourElement,C.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==C.secondElement&&a(C.secondElement,"focus",function(){return C.secondElement&&C.secondElement.select()}),void 0!==C.amPM&&a(C.amPM,"mousedown",r(function(e){f(e),c()})))}(),(C.selectedDates.length||C.config.noCalendar)&&(C.config.enableTime&&o(C.config.noCalendar?C.latestSelectedDateObj||C.config.minDate:void 0),X(!1)),t(),C.showTimeInput=0<C.selectedDates.length||C.config.noCalendar;var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!C.isMobile&&e&&z(),J("onReady")}(),C}function n(e,t){for(var n=Array.prototype.slice.call(e).filter(function(e){return e instanceof HTMLElement}),i=[],o=0;o<n.length;o++){var r=n[o];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=a(r,t||{}),i.push(r._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return n(this,e)},HTMLElement.prototype.flatpickr=function(e){return n([this],e)});var be=function(e,t){return"string"==typeof e?n(window.document.querySelectorAll(e),t):e instanceof Node?n([e],t):n(e,t)};return be.defaultConfig={},be.l10ns={en:te({},oe),default:te({},oe)},be.localize=function(e){be.l10ns.default=te({},be.l10ns.default,e)},be.setDefaults=function(e){be.defaultConfig=te({},be.defaultConfig,e)},be.parseDate=me({}),be.formatDate=he({}),be.compareDates=ve,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return n(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=be),be}),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=s(String(e||"").toLowerCase()))||!e.length)return[];var t,n,i,o,r=[],a=e.split(/ +/);for(t=0,n=a.length;t<n;t++){if(i=l(a[t]),this.settings.diacritics)for(o in c)c.hasOwnProperty(o)&&(i=i.replace(new RegExp(o,"g"),c[o]));r.push({string:a[t],regex:new RegExp(i,"i")})}return r},e.prototype.iterator=function(e,t){(a(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;t<n;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)}).apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var o,r,a,s;e=this.prepareSearch(e,t),r=e.tokens,o=e.options.fields,a=r.length,s=e.options.nesting;var l,c=function(e,t){var n,i;return e?-1===(i=(e=String(e||"")).search(t.regex))?0:(n=t.string.length/e.length,0===i&&(n+=.5),n):0},d=(l=o.length)?1===l?function(e,t){return c(g(t,o[0],s),e)}:function(e,t){for(var n=0,i=0;n<l;n++)i+=c(g(t,o[n],s),e);return i/l}:function(){return 0};return a?1===a?function(e){return d(r[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,i=0;n<a;n++){if((t=d(r[n],e))<=0)return 0;i+=t}return i/a}:function(e){for(var t=0,n=0;t<a;t++)n+=d(r[t],e);return n/a}:function(){return 0}},e.prototype.getSortFunction=function(e,n){var t,i,o,r,a,s,l,c,d,u,p;if(p=!(e=(o=this).prepareSearch(e,n)).query&&n.sort_empty||n.sort,d=function(e,t){return"$score"===e?t.score:g(o.items[t.id],e,n.nesting)},a=[],p)for(t=0,i=p.length;t<i;t++)(e.query||"$score"!==p[t].field)&&a.push(p[t]);if(e.query){for(u=!0,t=0,i=a.length;t<i;t++)if("$score"===a[t].field){u=!1;break}u&&a.unshift({field:"$score",direction:"desc"})}else for(t=0,i=a.length;t<i;t++)if("$score"===a[t].field){a.splice(t,1);break}for(c=[],t=0,i=a.length;t<i;t++)c.push("desc"===a[t].direction?-1:1);return(s=a.length)?1===s?(r=a[0].field,l=c[0],function(e,t){return l*f(d(r,e),d(r,t))}):function(e,t){var n,i,o;for(n=0;n<s;n++)if(o=a[n].field,i=c[n]*f(d(o,e),d(o,t)))return i;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var n=(t=r({},t)).fields,i=t.sort,o=t.sort_empty;return n&&!a(n)&&(t.fields=[n]),i&&!a(i)&&(t.sort=[i]),o&&!a(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,n){var i,o,t,r,a=this;return o=this.prepareSearch(e,n),n=o.options,e=o.query,r=n.score||a.getScoreFunction(o),e.length?a.iterator(a.items,function(e,t){i=r(e),(!1===n.filter||0<i)&&o.items.push({score:i,id:t})}):a.iterator(a.items,function(e,t){o.items.push({score:1,id:t})}),(t=a.getSortFunction(o,n))&&o.items.sort(t),o.total=o.items.length,"number"==typeof n.limit&&(o.items=o.items.slice(0,n.limit)),o};var f=function(e,t){return"number"==typeof e&&"number"==typeof t||(e=n(String(e||"")),t=n(String(t||""))),t<e?1:e<t?-1:0},r=function(e,t){var n,i,o,r;for(n=1,i=arguments.length;n<i;n++)if(r=arguments[n])for(o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);return e},g=function(e,t,n){if(e&&t){if(!n)return e[t];for(var i=t.split(".");i.length&&(e=e[i.shift()]););return e}},s=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},l=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},a=Array.isArray||"undefined"!=typeof $&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c={a:"[a]",b:"[bB]",c:"[cCc]",d:"[dDd]",e:"[e]",f:"[f]",g:"[g]",h:"[h]",i:"[iiI]",j:"[j]",k:"[k]",l:"[l]",n:"[nNn]",o:"[o]",p:"[p]",q:"[qq]",r:"[r]",s:"[sSs]",t:"[t]",u:"[u]",v:"[v]",w:"[w]",x:"[x]",y:"[y]",z:"[z]"},n=function(){var e,t,n,i,o="",r={};for(n in c)if(c.hasOwnProperty(n))for(o+=i=c[n].substring(2,c[n].length-1),e=0,t=i.length;e<t;e++)r[i.charAt(e)]=n;var a=new RegExp("["+o+"]","g");return function(e){return e.replace(a,function(e){return r[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={mixin:function(i){i.plugins={},i.prototype.initializePlugins=function(e){var t,n,i,o=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},r.isArray(e))for(t=0,n=e.length;t<n;t++)"string"==typeof e[t]?o.push(e[t]):(this.plugins.settings[e[t].name]=e[t].options,o.push(e[t].name));else if(e)for(i in e)e.hasOwnProperty(i)&&(this.plugins.settings[i]=e[i],o.push(i));for(;o.length;)this.require(o.shift())},i.prototype.loadPlugin=function(e){var t=this.plugins,n=i.plugins[e];if(!i.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');t.requested[e]=!0,t.loaded[e]=n.fn.apply(this,[this.plugins.settings[e]||{}]),t.names.push(e)},i.prototype.require=function(e){var t=this.plugins;if(!this.plugins.loaded.hasOwnProperty(e)){if(t.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');this.loadPlugin(e)}return t.loaded[e]},i.define=function(e,t){i.plugins[e]={name:e,fn:t}}}},r={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(M,u,e){"use strict";var x=function(e,t){if("string"!=typeof t||t.length){var l="string"==typeof t?new RegExp(t,"i"):t,c=function(e){var t=0;if(3===e.nodeType){var n=e.data.search(l);if(0<=n&&0<e.data.length){var i=e.data.match(l),o=document.createElement("span");o.className="highlight";var r=e.splitText(n),a=(r.splitText(i[0].length),r.cloneNode(!0));o.appendChild(a),r.parentNode.replaceChild(o,r),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var s=0;s<e.childNodes.length;++s)s+=c(e.childNodes[s]);return t};return e.each(function(){c(this)})}};M.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var i=function(){};i.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},i.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=i.prototype[t[n]]};var t,b=/Mac/.test(navigator.userAgent),D=b?91:17,O=b?18:17,I=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,c=function(e){return void 0!==e},S=function(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""},s=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},n={before:function(e,t,n){var i=e[t];e[t]=function(){return n.apply(e,arguments),i.apply(e,arguments)}},after:function(t,e,n){var i=t[e];t[e]=function(){var e=i.apply(t,arguments);return n.apply(t,arguments),e}}},o=function(t,n,e){var i,o=t.trigger,r={};for(i in t.trigger=function(){var e=arguments[0];if(-1===n.indexOf(e))return o.apply(t,arguments);r[e]=arguments},e.apply(t,[]),t.trigger=o,r)r.hasOwnProperty(i)&&o.apply(t,r[i])},g=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-i,t.length=i}return t},k=function(p){var f=null,e=function(e,t){var n,i,o,r,a,s,l,c,d,u;t=t||{},(e=e||window.event||{}).metaKey||e.altKey||(t.force||!1!==p.data("grow"))&&(n=p.val(),e.type&&"keydown"===e.type.toLowerCase()&&(o=48<=(i=e.keyCode)&&i<=57||65<=i&&i<=90||96<=i&&i<=111||186<=i&&i<=222||32===i,46===i||8===i?(c=g(p[0])).length?n=n.substring(0,c.start)+n.substring(c.start+c.length):8===i&&c.start?n=n.substring(0,c.start-1)+n.substring(c.start+1):46===i&&void 0!==c.start&&(n=n.substring(0,c.start)+n.substring(c.start+1)):o&&(s=e.shiftKey,l=String.fromCharCode(e.keyCode),n+=l=s?l.toUpperCase():l.toLowerCase())),r=p.attr("placeholder"),!n&&r&&(n=r),u=p,(a=((d=n)?(y.$testInput||(y.$testInput=M("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),y.$testInput.text(d),function(e,t,n){var i,o,r={};if(n)for(i=0,o=n.length;i<o;i++)r[n[i]]=e.css(n[i]);else r=e.css();t.css(r)}(u,y.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),y.$testInput.width()):0)+4)!==f&&(f=a,p.width(a),p.triggerHandler("resize")))};p.on("keydown keyup update blur",e),e()},y=function(e,t){var n,i,o,r,a=this;(r=e[0]).selectize=a;var s,l,c,d=window.getComputedStyle&&window.getComputedStyle(r,null);if(o=(o=d?d.getPropertyValue("direction"):r.currentStyle&&r.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",M.extend(a,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===r.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++y.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===t.loadThrottle?a.onSearchChange:(s=a.onSearchChange,l=t.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(c),c=window.setTimeout(function(){s.apply(e,t)},l)})}),a.sifter=new u(this.options,{diacritics:t.diacritics}),a.settings.options){for(n=0,i=a.settings.options.length;n<i;n++)a.registerOption(a.settings.options[n]);delete a.settings.options}if(a.settings.optgroups){for(n=0,i=a.settings.optgroups.length;n<i;n++)a.registerOptionGroup(a.settings.optgroups[n]);delete a.settings.optgroups}a.settings.mode=a.settings.mode||(1===a.settings.maxItems?"single":"multi"),"boolean"!=typeof a.settings.hideSelected&&(a.settings.hideSelected="multi"===a.settings.mode),a.initializePlugins(a.settings.plugins),a.setupCallbacks(),a.setupTemplates(),a.setup()};return i.mixin(y),void 0!==e?e.mixin(y):((t={explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'})||(t={}),console.error("Selectize: Dependency MicroPlugin is missing"),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())),M.extend(y.prototype,{setup:function(){var e,t,n,i,o,r,a,s,l,c,d,u,p,f,g=this,h=g.settings,m=g.eventNS,v=M(window),y=M(document),w=g.$input;if(a=g.settings.mode,s=w.attr("class")||"",e=M("<div>").addClass(h.wrapperClass).addClass(s).addClass(a),t=M("<div>").addClass(h.inputClass).addClass("items").appendTo(e),n=M('<input type="text" autocomplete="off" />').appendTo(t).attr("tabindex",w.is(":disabled")?"-1":g.tabIndex),r=M(h.dropdownParent||e),i=M("<div>").addClass(h.dropdownClass).addClass(a).hide().appendTo(r),o=M("<div>").addClass(h.dropdownContentClass).appendTo(i),(c=w.attr("id"))&&(n.attr("id",c+"-selectized"),M("label[for='"+c+"']").attr("for",c+"-selectized")),g.settings.copyClassesToDropdown&&i.addClass(s),e.css({width:w[0].style.width}),g.plugins.names.length&&(l="plugin-"+g.plugins.names.join(" plugin-"),e.addClass(l),i.addClass(l)),(null===h.maxItems||1<h.maxItems)&&1===g.tagType&&w.attr("multiple","multiple"),g.settings.placeholder&&n.attr("placeholder",h.placeholder),!g.settings.splitOn&&g.settings.delimiter){var C=g.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");g.settings.splitOn=new RegExp("\\s*"+C+"+\\s*")}w.attr("autocorrect")&&n.attr("autocorrect",w.attr("autocorrect")),w.attr("autocapitalize")&&n.attr("autocapitalize",w.attr("autocapitalize")),n[0].type=w[0].type,g.$wrapper=e,g.$control=t,g.$control_input=n,g.$dropdown=i,g.$dropdown_content=o,i.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(e){e.stopImmediatePropagation()}),i.on("mouseenter","[data-selectable]",function(){return g.onOptionHover.apply(g,arguments)}),i.on("mousedown click","[data-selectable]",function(){return g.onOptionSelect.apply(g,arguments)}),u="mousedown",p="*:not(input)",f=function(){return g.onItemSelect.apply(g,arguments)},(d=t).on(u,p,function(e){for(var t=e.target;t&&t.parentNode!==d[0];)t=t.parentNode;return e.currentTarget=t,f.apply(this,[e])}),k(n),t.on({mousedown:function(){return g.onMouseDown.apply(g,arguments)},click:function(){return g.onClick.apply(g,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return g.onKeyDown.apply(g,arguments)},keyup:function(){return g.onKeyUp.apply(g,arguments)},keypress:function(){return g.onKeyPress.apply(g,arguments)},resize:function(){g.positionDropdown.apply(g,[])},blur:function(){return g.onBlur.apply(g,arguments)},focus:function(){return g.ignoreBlur=!1,g.onFocus.apply(g,arguments)},paste:function(){return g.onPaste.apply(g,arguments)}}),y.on("keydown"+m,function(e){g.isCmdDown=e[b?"metaKey":"ctrlKey"],g.isCtrlDown=e[b?"altKey":"ctrlKey"],g.isShiftDown=e.shiftKey}),y.on("keyup"+m,function(e){e.keyCode===O&&(g.isCtrlDown=!1),16===e.keyCode&&(g.isShiftDown=!1),e.keyCode===D&&(g.isCmdDown=!1)}),y.on("mousedown"+m,function(e){if(g.isFocused){if(e.target===g.$dropdown[0]||e.target.parentNode===g.$dropdown[0])return!1;g.$control.has(e.target).length||e.target===g.$control[0]||g.blur(e.target)}}),v.on(["scroll"+m,"resize"+m].join(" "),function(){g.isOpen&&g.positionDropdown.apply(g,arguments)}),v.on("mousemove"+m,function(){g.ignoreHover=!1}),this.revertSettings={$children:w.children().detach(),tabindex:w.attr("tabindex")},w.attr("tabindex",-1).hide().after(g.$wrapper),M.isArray(h.items)&&(g.setValue(h.items),delete h.items),I&&w.on("invalid"+m,function(e){e.preventDefault(),g.isInvalid=!0,g.refreshState()}),g.updateOriginalInput(),g.refreshItems(),g.refreshState(),g.updatePlaceholder(),g.isSetup=!0,w.is(":disabled")&&g.disable(),g.on("change",this.onChange),w.data("selectize",g),w.addClass("selectized"),g.trigger("initialize"),!0===h.preload&&g.onSearchChange("")},setupTemplates:function(){var n=this.settings.labelField,i=this.settings.optgroupLabelField,e={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[n])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};this.settings.render=M.extend({},e,this.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]])&&this.on(e,t)},onClick:function(e){this.isFocused&&this.isOpen||(this.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,n=e.isDefaultPrevented();if(M(e.target),t.isFocused){if(e.target!==t.$control_input[0])return"single"===t.settings.mode?t.isOpen?t.close():t.open():n||t.setActiveItem(null),!1}else n||window.setTimeout(function(){t.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var o=this;o.isFull()||o.isInputHidden||o.isLocked?e.preventDefault():o.settings.splitOn&&setTimeout(function(){var e=o.$control_input.val();if(e.match(o.settings.splitOn))for(var t=M.trim(e).split(o.settings.splitOn),n=0,i=t.length;n<i;n++)o.createItem(t[n])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target,this.$control_input[0],this);if(!t.isLocked){switch(e.keyCode){case 65:if(t.isCmdDown)return void t.selectAll();break;case 27:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,-1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case 13:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case 8:case 46:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(b?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()}9!==e.keyCode&&e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(t){var n=this,i=n.settings.load;i&&(n.loadedSearches.hasOwnProperty(t)||(n.loadedSearches[t]=!0,n.load(function(e){i.apply(n,[t,e])})))},onFocus:function(e){var t=this,n=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(e);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),t&&t.focus&&t.focus(),n.isBlurring=!1,n.ignoreFocus=!1,n.trigger("blur")};n.isBlurring=!0,n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,n,i=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(n=M(e.currentTarget)).hasClass("create")?i.createItem(null,function(){i.settings.closeAfterSelect&&i.close()}):void 0!==(t=n.attr("data-value"))&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(t),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&i.setActiveOption(i.getOption(t)))},onItemSelect:function(e){this.isLocked||"multi"===this.settings.mode&&(e.preventDefault(),this.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){o(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(e,t){var n,i,o,r,a,s,l,c,d=this;if("single"!==d.settings.mode){if(!(e=M(e)).length)return M(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if("mousedown"===(n=t&&t.type.toLowerCase())&&d.isShiftDown&&d.$activeItems.length){for(c=d.$control.children(".active:last"),r=Array.prototype.indexOf.apply(d.$control[0].childNodes,[c[0]]),(a=Array.prototype.indexOf.apply(d.$control[0].childNodes,[e[0]]))<r&&(l=r,r=a,a=l),i=r;i<=a;i++)s=d.$control[0].childNodes[i],-1===d.$activeItems.indexOf(s)&&(M(s).addClass("active"),d.$activeItems.push(s));t.preventDefault()}else"mousedown"===n&&d.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(o=d.$activeItems.indexOf(e[0]),d.$activeItems.splice(o,1),e.removeClass("active")):d.$activeItems.push(e.addClass("active")[0]):(M(d.$activeItems).removeClass("active"),d.$activeItems=[e.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(e,t,n){var i,o,r,a,s,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,(e=M(e)).length&&(l.$activeOption=e.addClass("active"),!t&&c(t)||(i=l.$dropdown_content.height(),o=l.$activeOption.outerHeight(!0),t=l.$dropdown_content.scrollTop()||0,s=(a=r=l.$activeOption.offset().top-l.$dropdown_content.offset().top+t)-i+o,i+t<r+o?l.$dropdown_content.stop().animate({scrollTop:s},n?l.settings.scrollDuration:0):r<t&&l.$dropdown_content.stop().animate({scrollTop:a},n?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}},search:function(e){var t,n,i,o=this,r=o.settings,a=this.getSearchOptions();if(r.score&&"function"!=typeof(i=o.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,n=o.sifter.search(e,M.extend(a,{score:i})),o.currentResults=n):n=M.extend(!0,{},o.currentResults),r.hideSelected)for(t=n.items.length-1;0<=t;t--)-1!==o.items.indexOf(S(n.items[t].id))&&n.items.splice(t,1);return n},refreshOptions:function(e){var t,n,i,o,r,a,s,l,c,d,u,p,f,g,h,m;void 0===e&&(e=!0);var v,y,w=this,C=M.trim(w.$control_input.val()),b=w.search(C),D=w.$dropdown_content,O=w.$activeOption&&S(w.$activeOption.attr("data-value"));for(o=b.items.length,"number"==typeof w.settings.maxOptions&&(o=Math.min(o,w.settings.maxOptions)),r={},a=[],t=0;t<o;t++)for(s=w.options[b.items[t].id],l=w.render("option",s),c=s[w.settings.optgroupField]||"",n=0,i=(d=M.isArray(c)?c:[c])&&d.length;n<i;n++)c=d[n],w.optgroups.hasOwnProperty(c)||(c=""),r.hasOwnProperty(c)||(r[c]=document.createDocumentFragment(),a.push(c)),r[c].appendChild(l);for(this.settings.lockOptgroupOrder&&a.sort(function(e,t){return(w.optgroups[e].$order||0)-(w.optgroups[t].$order||0)}),u=document.createDocumentFragment(),t=0,o=a.length;t<o;t++)c=a[t],w.optgroups.hasOwnProperty(c)&&r[c].childNodes.length?((p=document.createDocumentFragment()).appendChild(w.render("optgroup_header",w.optgroups[c])),p.appendChild(r[c]),u.appendChild(w.render("optgroup",M.extend({},w.optgroups[c],{html:(v=p,y=void 0,y=document.createElement("div"),y.appendChild(v.cloneNode(!0)),y.innerHTML),dom:p})))):u.appendChild(r[c]);if(D.html(u),w.settings.highlight&&(D.removeHighlight(),b.query.length&&b.tokens.length))for(t=0,o=b.tokens.length;t<o;t++)x(D,b.tokens[t].regex);if(!w.settings.hideSelected)for(t=0,o=w.items.length;t<o;t++)w.getOption(w.items[t]).addClass("selected");(f=w.canCreate(C))&&(D.prepend(w.render("option_create",{input:C})),m=M(D[0].childNodes[0])),w.hasOptions=0<b.items.length||f,w.hasOptions?(0<b.items.length?((h=O&&w.getOption(O))&&h.length?g=h:"single"===w.settings.mode&&w.items.length&&(g=w.getOption(w.items[0])),g&&g.length||(g=m&&!w.settings.addPrecedence?w.getAdjacentOption(m,1):D.find("[data-selectable]:first"))):g=m,w.setActiveOption(g),e&&!w.isOpen&&w.open()):(w.setActiveOption(null),e&&w.isOpen&&w.close())},addOption:function(e){var t,n,i,o=this;if(M.isArray(e))for(t=0,n=e.length;t<n;t++)o.addOption(e[t]);else(i=o.registerOption(e))&&(o.userOptions[i]=!0,o.lastQuery=null,o.trigger("option_add",i,e))},registerOption:function(e){var t=S(e[this.settings.valueField]);return null!=t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=S(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var n,i,o,r,a,s,l,c=this;if(e=S(e),o=S(t[c.settings.valueField]),null!==e&&c.options.hasOwnProperty(e)){if("string"!=typeof o)throw new Error("Value must be set in option data");l=c.options[e].$order,o!==e&&(delete c.options[e],-1!==(r=c.items.indexOf(e))&&c.items.splice(r,1,o)),t.$order=t.$order||l,c.options[o]=t,a=c.renderCache.item,s=c.renderCache.option,a&&(delete a[e],delete a[o]),s&&(delete s[e],delete s[o]),-1!==c.items.indexOf(o)&&(n=c.getItem(e),i=M(c.render("item",t)),n.hasClass("active")&&i.addClass("active"),n.replaceWith(i)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var n=this;e=S(e);var i=n.renderCache.item,o=n.renderCache.option;i&&delete i[e],o&&delete o[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(){var n=this;n.loadedSearches={},n.userOptions={},n.renderCache={};var i=n.options;M.each(n.options,function(e,t){-1==n.items.indexOf(e)&&delete i[e]}),n.options=n.sifter.items=i,n.lastQuery=null,n.trigger("option_clear")},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,t){var n=this.$dropdown.find("[data-selectable]"),i=n.index(e)+t;return 0<=i&&i<n.length?n.eq(i):M()},getElementWithValue:function(e,t){if(void 0!==(e=S(e))&&null!==e)for(var n=0,i=t.length;n<i;n++)if(t[n].getAttribute("data-value")===e)return M(t[n]);return M()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,i=0;i<n.length;i++)this.buffer.appendChild(n[i]);for(var o=M.isArray(e)?e:[e],r=(i=0,o.length);i<r;i++)this.isPending=i<r-1,this.addItem(o[i],t);var a=this.$control[0];a.insertBefore(this.buffer,a.firstChild),this.buffer=null},addItem:function(s,l){o(this,l?[]:["change"],function(){var e,t,n,i,o,r=this,a=r.settings.mode;s=S(s),-1===r.items.indexOf(s)?r.options.hasOwnProperty(s)&&("single"===a&&r.clear(l),"multi"===a&&r.isFull()||(e=M(r.render("item",r.options[s])),o=r.isFull(),r.items.splice(r.caretPos,0,s),r.insertAtCaret(e),(!r.isPending||!o&&r.isFull())&&r.refreshState(),r.isSetup&&(n=r.$dropdown_content.find("[data-selectable]"),r.isPending||(t=r.getOption(s),i=r.getAdjacentOption(t,1).attr("data-value"),r.refreshOptions(r.isFocused&&"single"!==a),i&&r.setActiveOption(r.getOption(i))),!n.length||r.isFull()?r.close():r.isPending||r.positionDropdown(),r.updatePlaceholder(),r.trigger("item_add",s,e),r.isPending||r.updateOriginalInput({silent:l})))):"single"===a&&r.close()})},removeItem:function(e,t){var n,i,o,r=this;n=e instanceof M?e:r.getItem(e),e=S(n.attr("data-value")),-1!==(i=r.items.indexOf(e))&&(n.remove(),n.hasClass("active")&&(o=r.$activeItems.indexOf(n[0]),r.$activeItems.splice(o,1)),r.items.splice(i,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(e)&&r.removeOption(e,t),i<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput({silent:t}),r.positionDropdown(),r.trigger("item_remove",e,n))},createItem:function(e,n){var i=this,o=i.caretPos;e=e||M.trim(i.$control_input.val()||"");var r=arguments[arguments.length-1];if("function"!=typeof r&&(r=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(e))return r(),!1;i.lock();var t,a,s="function"==typeof i.settings.create?this.settings.create:function(e){var t={};return t[i.settings.labelField]=e,t[i.settings.valueField]=e,t},l=(a=!(t=function(e){if(i.unlock(),!e||"object"!=typeof e)return r();var t=S(e[i.settings.valueField]);if("string"!=typeof t)return r();i.setTextboxValue(""),i.addOption(e),i.setCaret(o),i.addItem(t),i.refreshOptions(n&&"single"!==i.settings.mode),r(e)}),function(){a||(a=!0,t.apply(this,arguments))}),c=s.apply(this,[e,l]);return void 0!==c&&l(c),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),n=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",n).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!M.isEmptyObject(e.options)).toggleClass("has-items",0<e.items.length),e.$control_input.data("grow",!t&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,i,o,r=this;if(e=e||{},1===r.tagType){for(i=[],t=0,n=r.items.length;t<n;t++)o=r.options[r.items[t]][r.settings.labelField]||"",i.push('<option value="'+s(r.items[t])+'" selected="selected">'+s(o)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),r.$input.html(i.join(""))}else r.$input.val(r.getValue()),r.$input.attr("value",r.$input.val());r.isSetup&&(e.silent||r.trigger("change",r.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.isBlurring||e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e[0].getBoundingClientRect().width,top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),n=e[0],i=this.buffer||this.$control[0];0===t?i.insertBefore(n,i.firstChild):i.insertBefore(n,i.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,n,i,o,r,a,s,l,c,d=this;if(i=e&&8===e.keyCode?-1:1,o=g(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(s=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),r=[],d.$activeItems.length){for(c=d.$control.children(".active:"+(0<i?"last":"first")),a=d.$control.children(":not(input)").index(c),0<i&&a++,t=0,n=d.$activeItems.length;t<n;t++)r.push(M(d.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(i<0&&0===o.start&&0===o.length?r.push(d.items[d.caretPos-1]):0<i&&o.start===d.$control_input.val().length&&r.push(d.items[d.caretPos]));if(!r.length||"function"==typeof d.settings.onDelete&&!1===d.settings.onDelete.apply(d,[r]))return!1;for(void 0!==a&&d.setCaret(a);r.length;)d.removeItem(r.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),s&&((l=d.getOption(s)).length&&d.setActiveOption(l)),!0},advanceSelection:function(e,t){var n,i,o,r,a,s=this;0!==e&&(s.rtl&&(e*=-1),n=0<e?"last":"first",i=g(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(r=s.$control_input.val().length,(e<0?0===i.start&&0===i.length:i.start===r)&&!r&&s.advanceCaret(e,t)):(a=s.$control.children(".active:"+n)).length&&(o=s.$control.children(":not(input)").index(a),s.setActiveItem(null),s.setCaret(0<e?o+1:o)))},advanceCaret:function(e,t){var n,i,o=this;0!==e&&(n=0<e?"next":"prev",o.isShiftDown?(i=o.$control_input[n]()).length&&(o.hideInput(),o.setActiveItem(i),t&&t.preventDefault()):o.setCaret(o.caretPos+e))},setCaret:function(e){var t,n,i,o,r=this;if(e="single"===r.settings.mode?r.items.length:Math.max(0,Math.min(r.items.length,e)),!r.isPending)for(t=0,n=(i=r.$control.children(":not(input)")).length;t<n;t++)o=M(i[t]).detach(),t<e?r.$control_input.before(o):r.$control.append(o);r.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,n=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),0==--y.count&&y.$testInput&&(y.$testInput.remove(),y.$testInput=void 0),M(window).off(t),M(document).off(t),M(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var n,i,o="",r=!1,a=this;return"option"!==e&&"item"!==e||(r=!!(n=S(t[a.settings.valueField]))),r&&(c(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(n))?a.renderCache[e][n]:(o=M(a.settings.render[e].apply(this,[t,s])),"option"===e||"option_create"===e?t[a.settings.disabledField]||o.attr("data-selectable",""):"optgroup"===e&&(i=t[a.settings.optgroupValueField]||"",o.attr("data-group",i),t[a.settings.disabledField]&&o.attr("data-disabled","")),"option"!==e&&"item"!==e||o.attr("data-value",n||""),r&&(a.renderCache[e][n]=o[0]),o[0])},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){if(!this.settings.create)return!1;var t=this.settings.createFilter;return e.length&&("function"!=typeof t||t.apply(this,[e]))&&("string"!=typeof t||new RegExp(t).test(e))&&(!(t instanceof RegExp)||t.test(e))}}),y.count=0,y.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},M.fn.selectize=function(o){var r=M.fn.selectize.defaults,d=M.extend({},r,o),u=d.dataAttr,p=d.labelField,f=d.valueField,g=d.disabledField,h=d.optgroupField,m=d.optgroupLabelField,v=d.optgroupValueField;return this.each(function(){if(!this.selectize){var e=M(this),t=this.tagName.toLowerCase(),n=e.attr("placeholder")||e.attr("data-placeholder");n||d.allowEmptyOption||(n=e.children('option[value=""]').text());var i={placeholder:n,options:[],optgroups:[],items:[]};"select"===t?function(e,a){var t,n,i,o,r=a.options,s={},l=function(e){var t=u&&e.attr(u);return"string"==typeof t&&t.length?JSON.parse(t):null},c=function(e,t){e=M(e);var n=S(e.val());if(n||d.allowEmptyOption)if(s.hasOwnProperty(n)){if(t){var i=s[n][h];i?M.isArray(i)?i.push(t):s[n][h]=[i,t]:s[n][h]=t}}else{var o=l(e)||{};o[p]=o[p]||e.text(),o[f]=o[f]||n,o[g]=o[g]||e.prop("disabled"),o[h]=o[h]||t,s[n]=o,r.push(o),e.is(":selected")&&a.items.push(n)}};for(a.maxItems=e.attr("multiple")?null:1,t=0,n=(o=e.children()).length;t<n;t++)"optgroup"===(i=o[t].tagName.toLowerCase())?function(e){var t,n,i,o,r;for((i=(e=M(e)).attr("label"))&&((o=l(e)||{})[m]=i,o[v]=i,o[g]=e.prop("disabled"),a.optgroups.push(o)),t=0,n=(r=M("option",e)).length;t<n;t++)c(r[t],i)}(o[t]):"option"===i&&c(o[t])}(e,i):function(e,t){var n,i,o,r,a=e.attr(u);if(a)for(t.options=JSON.parse(a),n=0,i=t.options.length;n<i;n++)t.items.push(t.options[n][f]);else{var s=M.trim(e.val()||"");if(!d.allowEmptyOption&&!s.length)return;for(n=0,i=(o=s.split(d.delimiter)).length;n<i;n++)(r={})[p]=o[n],r[f]=o[n],t.options.push(r);t.items=o}}(e,i),new y(e,M.extend(!0,{},r,i,o))}})},M.fn.selectize.defaults=y.defaults,M.fn.selectize.support={validity:I},y.define("drag_drop",function(e){if(!M.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var i=this;i.lock=(o=i.lock,function(){var e=i.$control.data("sortable");return e&&e.disable(),o.apply(i,arguments)}),i.unlock=(n=i.unlock,function(){var e=i.$control.data("sortable");return e&&e.enable(),n.apply(i,arguments)}),i.setup=(t=i.setup,function(){t.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var e=i.$activeItems?i.$activeItems.slice():null,t=[];n.children("[data-value]").each(function(){t.push(M(this).attr("data-value"))}),i.setValue(t),i.setActiveItem(e)}})})}var t,n,o}),y.define("dropdown_header",function(e){var t,n=this;e=M.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},e),n.setup=(t=n.setup,function(){t.apply(n,arguments),n.$dropdown_header=M(e.html(e)),n.$dropdown.prepend(n.$dropdown_header)})}),y.define("optgroup_columns",function(s){var r,l=this;s=M.extend({equalizeWidth:!0,equalizeHeight:!0},s),this.getAdjacentOption=function(e,t){var n=e.closest("[data-group]").find("[data-selectable]"),i=n.index(e)+t;return 0<=i&&i<n.length?n.eq(i):M()},this.onKeyDown=(r=l.onKeyDown,function(e){var t,n,i,o;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?r.apply(this,arguments):(l.ignoreHover=!0,t=(o=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((n=(i=(o=37===e.keyCode?o.prev("[data-group]"):o.next("[data-group]")).find("[data-selectable]")).eq(Math.min(i.length-1,t))).length&&this.setActiveOption(n)))});var c=function(){var e,t=c.width,n=document;return void 0===t&&((e=n.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=c.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t},e=function(){var e,t,n,i,o,r,a;if((t=(a=M("[data-group]",l.$dropdown_content)).length)&&l.$dropdown_content.width()){if(s.equalizeHeight){for(e=n=0;e<t;e++)n=Math.max(n,a.eq(e).height());a.css({height:n})}s.equalizeWidth&&(r=l.$dropdown_content.innerWidth()-c(),i=Math.round(r/t),a.css({width:i}),1<t&&(o=r-i*(t-1),a.eq(t-1).css({width:o})))}};(s.equalizeHeight||s.equalizeWidth)&&(n.after(this,"positionDropdown",e),n.after(this,"refreshOptions",e))}),y.define("remove_button",function(e){var r,t,n,i,a;(e=M.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e),"single"!==this.settings.mode)?(i=r=this,a='<a href="javascript:void(0)" class="'+(t=e).className+'" tabindex="-1" title="'+s(t.title)+'">'+t.label+"</a>",r.setup=(n=i.setup,function(){if(t.append){var o=i.settings.render.item;i.settings.render.item=function(e){return t=o.apply(r,arguments),n=a,i=t.search(/(<\/[^>]+>\s*)$/),t.substring(0,i)+n+t.substring(i);var t,n,i}}n.apply(r,arguments),r.$control.on("click","."+t.className,function(e){if(e.preventDefault(),!i.isLocked){var t=M(e.currentTarget).parent();i.setActiveItem(t),i.deleteSelection()&&i.setCaret(i.items.length)}})})):function(o,t){t.className="remove-single";var n,r=o,a='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+s(t.title)+'">'+t.label+"</a>";o.setup=(n=r.setup,function(){if(t.append){var e=M(r.$input.context).attr("id"),i=(M("#"+e),r.settings.render.item);r.settings.render.item=function(e){return t=i.apply(o,arguments),n=a,M("<span>").append(t).append(n);var t,n}}n.apply(o,arguments),o.$control.on("click","."+t.className,function(e){e.preventDefault(),r.isLocked||r.clear()})})}(this,e)}),y.define("restore_on_backspace",function(i){var o,e=this;i.text=i.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(o=e.onKeyDown,function(e){var t,n;return 8===e.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(t=this.caretPos-1)&&t<this.items.length?(n=this.options[this.items[t]],this.deleteSelection(e)&&(this.setTextboxValue(i.text.apply(this,[n])),this.refreshOptions(!0)),void e.preventDefault()):o.apply(this,arguments)})}),y});